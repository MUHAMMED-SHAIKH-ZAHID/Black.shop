
 

 <a href="/admin/add-category" class="btn btn-dark">Add New Category </a>

 <div>
  <a href="/admin/sub-category" class="btn btn-dark">Add New SubCategory </a>
 </div>
   
            {{!-- </div> --}}

            
            </div>
   {{!-- table --}}

  <section>
    <div class="container-fluid">
         <div class="col-11 d-flex justify-content-center  mt-3 mb-2">
                
            </div>
        </div>
   
        <table class="table table-dark table-striped table-hover   mt-3" id="tablenew">
  <thead class="thead-dark"  style="background-color:rgb(9, 9, 9); color: beige;">
    <tr>
      
      <th scope="col">Category Name</th>
      <th scope="col">Remove  </th>
      <th></th>
   
    </tr>
  </thead>
  <tbody>
    {{#each category}}
    <tr>
      
      <td>{{this.categoryname}}</td>
       {{!-- <td><img src="/{{this.categoryimg.[0]}}" alt="" width="20em"></td> --}}
       <td>  <a onclick="deleteCategory('{{this._id}}')" class="btn btn-danger"
             >Delete</a> 
        </td>
        <td></td>
  </div>
                
{{/each}}
                
   
                 
  </tbody>
</table>
</section>
<div class="mb-5"></div>
<div>     <table class="table table-dark table-striped table-hover " id="tablenew1">
  <thead class="thead-dark"  style="background-color:rgb(9, 9, 9); color: rgb(214, 214, 211);">
    <tr>
      
      <th scope="col">SubCategory Name</th>
      <th> category</th>
      <th>EDIT</th>
   
    </tr>
  </thead>
  <tbody>
    {{#each subCategory}}
    <tr>
      
      <td>{{this.subCategoryName}}</td>
      <td>{{Category.categoryname}}</td>
       <td>  <a href="/admin/remove-Subcategory/{{this._id}}" class="btn btn-danger"
               onclick="return confirm('Are you Sure You Want To Delete {{this.subCategoryName}} Category')">Delete</a> 
        </td>
  </div>
                
{{/each}}
                
   
                 
  </tbody>
</table></div>


    </div>

    
</section>
{{!-- new --}}

<script>
  $(document).ready( function () {
    $('#tablenew').DataTable();
} );
  $(document).ready( function () {
    $('#tablenew1').DataTable();
} );
</script>


<script>
 const deleteCategory = (id) => {
  swal("HI","HI")
       swal({
      title: "Are you sure?",
      text: "Remove item From Cart !",
      icon: "warning",
      buttons: true,
      className: "swal-delete",
      dangerMode: true,
    })
      .then(async (willDelete) => {
        if (willDelete) {
          const res = await axios.post(`/admin/deleteCategory/${id}`, {}).then((e) => {
            console.log(e.data.response)
            if(e.data.response== false){
              console.log("testing of the year")

              swal("You Cant Delete the Category its used by products!", {
            icon: "warning",
            className: "",
            button: false,
            timer: 7000,
          });
            }else{
             
          swal("Poof! Your  file has been deleted!", {
            icon: "success",
            className: "swal-delete",
            button: false,
            timer: 7000,
          });
              window.location.reload()
            }
          })
          

        
        } else {
          swal({
            text: "Your  Category is Safe!",
            className: "swal-delete",
            button: false,
            timer: 700,
          });
        }
      });
  }
 
</script>




 